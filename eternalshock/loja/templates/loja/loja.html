{% extends 'global/base.html' %}
{% load static %}

{% block titulo %}Loja G-Shock{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'loja/css/style.css' %}">
{% endblock %}

{% block corpo %}

<div class="loja-hero">
    <h1>Loja G-Shock</h1>
    <p>Descubra nossos modelos exclusivos e edições limitadas</p>
</div>

<div class="loja-filtros">
    <div class="loja-filtros-content">
        <div class="filtro-grupo">
            <label>Filtrar por categoria</label>
            <div class="filtro-opcoes">
                <a href="{% url 'loja' %}" class="{% if not categoria %}ativo{% endif %}">Todos</a>
                <a href="?categoria=relogios" class="{% if categoria == 'relogios' %}ativo{% endif %}">Relógios</a>
                <a href="?categoria=acessorios" class="{% if categoria == 'acessorios' %}ativo{% endif %}">Acessórios</a>
                <a href="?categoria=edicoes-limitadas" class="{% if categoria == 'edicoes-limitadas' %}ativo{% endif %}">Edições Limitadas</a>
                <a href="?categoria=colaboracoes" class="{% if categoria == 'colaboracoes' %}ativo{% endif %}">Colaborações</a>
            </div>
        </div>
    </div>
</div>

<div class="produtos-container">
    {% if produtos %}
        <div class="produtos-grid">
            {% for produto in produtos %}
                <div class="produto-card">
                    <div class="produto-imagem">
                        {% if produto.imagem %}
                            <img src="{{ produto.imagem.url }}" alt="{{ produto.nome }}">
                        {% else %}
                            <img src="https://via.placeholder.com/280x250?text={{ produto.nome }}" alt="{{ produto.nome }}">
                        {% endif %}
                        {% if produto.categoria == 'edicoes-limitadas' %}
                            <div class="produto-etiqueta">Limitado</div>
                        {% endif %}
                    </div>
                    <div class="produto-info">
                        <span class="produto-categoria">{{ produto.get_categoria_display }}</span>
                        <h3 class="produto-nome">{{ produto.nome }}</h3>
                        <p class="produto-descricao">{{ produto.descricao }}</p>
                        <div class="produto-footer">
                            <span class="produto-preco">R$ {{ produto.preco }}</span>
                            {% if produto.estoque > 0 %}
                                <a href="{% url 'detalhes_produto' produto.id %}" class="btn-adicionar">Ver Detalhes</a>
                            {% else %}
                                <button class="btn-adicionar" disabled>Indisponível</button>
                            {% endif %}
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="carrinho-vazio">
            <h2>Nenhum produto encontrado</h2>
            <p>Desculpe, não há produtos nesta categoria no momento.</p>
            <a href="{% url 'loja' %}" class="btn-adicionar">Ver todos os produtos</a>
        </div>
    {% endif %}
</div>

{% endblock %}
